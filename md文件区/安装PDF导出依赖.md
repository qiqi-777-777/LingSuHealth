# 安装 PDF 导出依赖（支持中文）

## 步骤

1. 进入 ui 目录：
```bash
cd ui
```

2. 安装依赖：
```bash
npm install
```

这会安装：
- jspdf@2.5.2 - PDF 生成库
- html2canvas@1.4.1 - HTML 转图片库

3. 重启开发服务器：
```bash
npm run dev
```

## 说明

### 技术方案
使用 **html2canvas + jsPDF** 的组合方案：
1. html2canvas 将 HTML 内容截图为图片
2. jsPDF 将图片嵌入到 PDF 中

### 优势
- ✅ **完美支持中文**：通过截图方式，所有中文都能正确显示
- ✅ **保留样式**：CSS 样式、颜色、布局完全保留
- ✅ **支持图表**：Chart.js 图表也能正确导出
- ✅ **高清晰度**：使用 2x scale 提高清晰度

## 功能特点

### PDF 导出功能
- ✅ 支持导出单个区块或完整报告
- ✅ 自动分页处理（内容超过一页时）
- ✅ 包含标题和时间戳
- ✅ 完美显示中文内容
- ✅ 保留所有样式和颜色
- ✅ 支持图表导出

### 使用方法
1. 完成测评后查看结果
2. 点击顶部"导出PDF"按钮导出完整报告
3. 或点击各区块右上角的"导出"按钮导出单个区块
4. PDF 文件自动下载

### 文件命名
- 格式：`体质评估报告_[时间戳].pdf`
- 示例：`体质评估报告_1704067200000.pdf`

## 注意事项

1. **导出速度**：
   - 截图方式需要一定时间（通常 1-3 秒）
   - 导出时会显示"导出中..."提示

2. **浏览器兼容性**：
   - 支持所有现代浏览器（Chrome、Firefox、Safari、Edge）
   - 需要浏览器支持 Canvas API

3. **文件大小**：
   - 图片格式的 PDF，文件较大（通常 200KB - 1MB）
   - 取决于内容的复杂度和长度

4. **打印质量**：
   - 使用 2x scale 确保打印清晰
   - 适合 A4 纸张打印

## 导出内容

### 完整报告包含：
1. **标题页**：报告标题和评估时间
2. **评估结论**：体质类型和简述
3. **健康风险提示**：风险列表
4. **调理建议**：编号建议列表
5. **健康画像数据**：
   - 健康五维分析图表
   - 体质倾向分布图表
   - 睡眠、情绪、饮食数据卡片

### 单个区块导出：
- 只导出选中的区块内容
- 包含标题和时间戳
